(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1302:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return ex_spec_boolean})),__webpack_require__.d(__webpack_exports__,"l",(function(){return ex_spec_map})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ex_spec_addressType})),__webpack_require__.d(__webpack_exports__,"n",(function(){return ex_spec_networkId})),__webpack_require__.d(__webpack_exports__,"f",(function(){return ex_spec_cat})),__webpack_require__.d(__webpack_exports__,"v",(function(){return ex_spec_zeroOrOne})),__webpack_require__.d(__webpack_exports__,"i",(function(){return ex_spec_epochTag})),__webpack_require__.d(__webpack_exports__,"t",(function(){return ex_spec_stringp})),__webpack_require__.d(__webpack_exports__,"k",(function(){return ex_spec_int})),__webpack_require__.d(__webpack_exports__,"q",(function(){return ex_spec_password})),__webpack_require__.d(__webpack_exports__,"p",(function(){return ex_spec_or})),__webpack_require__.d(__webpack_exports__,"o",(function(){return ex_spec_nul})),__webpack_require__.d(__webpack_exports__,"s",(function(){return ex_spec_string})),__webpack_require__.d(__webpack_exports__,"h",(function(){return ex_spec_epochRef})),__webpack_require__.d(__webpack_exports__,"u",(function(){return ex_spec_truep})),__webpack_require__.d(__webpack_exports__,"j",(function(){return ethHexAddress})),__webpack_require__.d(__webpack_exports__,"m",(function(){return mnemonic})),__webpack_require__.d(__webpack_exports__,"r",(function(){return privateKey})),__webpack_require__.d(__webpack_exports__,"b",(function(){return base32Address})),__webpack_require__.d(__webpack_exports__,"d",(function(){return base32UserAddress})),__webpack_require__.d(__webpack_exports__,"c",(function(){return base32ContractAddress})),__webpack_require__.d(__webpack_exports__,"g",(function(){return dbid}));var ex_spec_boolean,ex_spec_map,ex_spec_addressType,ex_spec_networkId,ex_spec_defBase32AddressSchemaFactory,ex_spec_cat,ex_spec_zeroOrOne,ex_spec_epochTag,ex_spec_stringp,ex_spec_int,ex_spec_password,ex_spec_or,ex_spec_nul,ex_spec_defRestSchemas,ex_spec_string,ex_spec_epochRef,ex_spec_integer,ex_spec_truep,is,Js,Ks,Ls,Ms,Ns,shared=__webpack_require__(1304),ds=function(a,b,c){return new shared.a.Ie(null,(function(){var d=shared.a.J(c);if(d){var e=shared.a.Cf(a,d);return a===shared.a.O(e)?shared.a.xe(e,ds(a,b,shared.a.Df(b,d))):null}return null}),null)},fs=function(a){return shared.a.Gf((function(b){return!shared.a.Dd(b)}),shared.a.Qc(function(a){return function d(c){return new shared.a.Ie(null,(function(){if(shared.a.y(shared.a.Dd.g?shared.a.Dd.g(c):shared.a.Dd.call(null,c))){var e=shared.a.R([shared.a.J.g?shared.a.J.g(c):shared.a.J.call(null,c)]);e=shared.a.Ye(shared.a.Vm,shared.a.Ze(shared.a.Lh,d,e))}else e=null;return shared.a.xe(c,e)}),null)}(a)}(a)))},hs=function(a){return shared.a.ai(a,shared.a.R([shared.a.bi,!0]))},ks=function(a,b){return shared.a.y(shared.a.pf(shared.a.rh([b]),is))?new shared.a.X(null,2,5,shared.a.Y,[b,new shared.a.w(null,1,[js,a],null)],null):b},ls=function(a,b){return shared.a.Mh.g(["base32",shared.a.y(a)?["-",shared.a.y(b)?[shared.a.C.g(a),"-",shared.a.C.g(b)].join(""):shared.a.C.g(a)].join(""):shared.a.y(b)?["-",shared.a.C.g(b)].join(""):"","-address"].join(""))},spec_ms=function ms(a,b,c){var e=shared.a.J(b);b=shared.a.K(e);var f=shared.a.N(e);if(f){e=shared.a.Kf.i;var g=shared.a.T.h(a,b);c=ms.i?ms.i(g,f,c):ms.call(null,g,f,c),a=e.call(shared.a.Kf,a,b,c)}else a=shared.a.Kf.i(a,b,c);return a},js=new shared.a.V(null,"netId","netId",-280816369),ns=new shared.a.V(null,"privateKey","privateKey",1845961641),os=new shared.a.V(null,"hexContractAddress","hexContractAddress",-893096304),ps=new shared.a.V(null,"hexUserAddress","hexUserAddress",1842704561),qs=new shared.a.V(null,"randomPrivateKey","randomPrivateKey",1183021577),rs=new shared.a.V(null,"INTERNAL_CONTRACTS_HEX_ADDRESS","INTERNAL_CONTRACTS_HEX_ADDRESS",1890509993),ss=new shared.a.V(null,"randomHDPath","randomHDPath",-672829199),ts=new shared.a.V(null,"epoch-ref","epoch-ref",-48908512),us=new shared.a.V(null,"randomHexAddress","randomHexAddress",1570574414),vs=new shared.a.V(null,"hexBuiltInAddress","hexBuiltInAddress",1280085039),ws=new shared.a.V(null,"undefined","undefined",-1970511116),xs=new shared.a.V("cfxjs.spec.core","schema","cfxjs.spec.core/schema",-2104791549),ys=new shared.a.V(null,"hexNullAddress","hexNullAddress",-1249531275),zs=new shared.a.V(null,"validateHDPath","validateHDPath",-1924266109),As=new shared.a.V(null,"epoch-tag","epoch-tag",-1905188154),Bs=new shared.a.V(null,"hd-path","hd-path",-1739234499),Cs=new shared.a.V(null,"validateMnemonic","validateMnemonic",-1802951577),Ds=new shared.a.V(null,"hexString","hexString",608989661),Es=new shared.a.V(null,"validatePrivateKey","validatePrivateKey",2114592353),Fs=new shared.a.V(null,"generateMnemonic","generateMnemonic",-1133348254),Gs=new shared.a.V(null,"address-type","address-type",921859604),Hs=new shared.a.V(null,"network-id","network-id",-1769267262),spec_Is=function Is(a,b){return function(a,b,c){if(shared.a.te(c)){var d=shared.a.Ye(shared.a.Um,shared.a.Lh.h(a,c));return b.g?b.g(d):b.call(null,d)}return shared.a.$f(c)?(d=new shared.a.$d((e=shared.a.Kb(c),a.g?a.g(e):a.call(null,e)),function(){var e=shared.a.Lb(c);return a.g?a.g(e):a.call(null,e)}()),b.g?b.g(d):b.call(null,d)):shared.a.Md(c)?(d=shared.a.Ah(shared.a.Lh.h(a,c)),b.g?b.g(d):b.call(null,d)):shared.a.Fd(c)?(d=shared.a.jb((function(e,f){return shared.a.U.h(e,a.g?a.g(f):a.call(null,f))}),c,c),b.g?b.g(d):b.call(null,d)):shared.a.Ad(c)?(d=shared.a.ih.h(shared.a.qd(c),shared.a.Lh.h(a,c)),b.g?b.g(d):b.call(null,d)):b.g?b.g(c):b.call(null,c);var e}(shared.a.sf(Is,a),a,b)},spec_Os=function Os(a){switch(arguments.length){case 1:return Os.g(arguments[0]);case 2:return Os.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",shared.a.C.g(arguments.length)].join(""))}};spec_Os.g=function(a){return spec_Os.h(a,shared.a.kf)},spec_Os.h=function(a,b){return a=hs(a),b=shared.a.T.h(b,js),shared.a.y(b)?spec_Is(shared.a.sf(ks,b),a):a},spec_Os.B=2;var spec_Ps=function Ps(a){switch(arguments.length){case 1:return Ps.g(arguments[0]);case 2:return Ps.h(arguments[0],arguments[1]);case 3:return Ps.i(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",shared.a.C.g(arguments.length)].join(""))}};spec_Ps.g=function(a){return spec_Ps.i(a,void 0,shared.a.kf)},spec_Ps.h=function(a,b){return spec_Ps.i(a,b,shared.a.kf)},spec_Ps.i=function(a,b,c){return c=hs(c),a=shared.a.fi(spec_Os)(a,c),b=shared.a.ci(b),shared.a.Ll(a,b,c)},spec_Ps.B=3;var spec_Qs=function Qs(a){switch(arguments.length){case 2:return Qs.h(arguments[0],arguments[1]);case 3:return Qs.i(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",shared.a.C.g(arguments.length)].join(""))}};spec_Qs.h=function(a,b){return spec_Qs.i(a,b,shared.a.kf)},spec_Qs.i=function(a,b,c){return c=hs(c),a=shared.a.fi(spec_Os)(a,c),b=shared.a.ci(b),b=shared.a.Ol(a,c)(b,shared.a.If,shared.a.If),b=shared.a.Am(b),shared.a.en(b)},spec_Qs.B=3;var spec_Rs=function Rs(a){for(var c=[],d=arguments.length,e=0;e<d;)c.push(arguments[e]),e+=1;return Rs.j(arguments[0],1<c.length?new shared.a.I(c.slice(1),0,null):null)};spec_Rs.j=function(a,b){b=ds(2,2,b);var c=shared.a.K(b),d=shared.a.S(c,0,null);return c=shared.a.S(c,1,null),d=shared.a.R([shared.a.Gd(d)?d:new shared.a.X(null,1,5,shared.a.Y,[d],null),c]),a=shared.a.xk(a,null),a=shared.a.Jl(shared.a.Uj(a),shared.a.ff(shared.a.Ze(spec_ms,shared.a.Rj(a),d)),shared.a.Tj(a),shared.a.Sj(a)),b=fs(shared.a.Qc(b)),shared.a.zd(b)?a:shared.a.Ze(spec_Rs,a,b)},spec_Rs.B=1,spec_Rs.D=function(a){var b=shared.a.K(a);return a=shared.a.N(a),this.j(b,a)};var Ss=spec_Rs.j(new shared.a.X(null,2,5,shared.a.Y,[shared.a.Dn,new shared.a.w(null,2,[shared.a.fk,8,shared.a.gk,128],null)],null),shared.a.R([shared.a.gp,"String between 8 to 128 character",shared.a.Z,shared.a.jn])),Ts=spec_Rs.j(new shared.a.X(null,4,5,shared.a.Y,[shared.a.Ip,shared.a.ho,new shared.a.X(null,2,5,shared.a.Y,[shared.a.qn,0],null),new shared.a.X(null,2,5,shared.a.Y,[shared.a.eo,4294967295],null)],null),shared.a.R([shared.a.Z,Hs,shared.a.gp,"1029 for mainnet, 1 for testnet, 0 <= networkId <= 4294967295"])),Us=spec_Rs.j(new shared.a.X(null,5,5,shared.a.Y,[shared.a.iq,"user","contract","builtin","null"],null),shared.a.R([shared.a.Z,Gs,shared.a.gp,"Is string, one of user contract builtin null"])),Vs=shared.a.Br(new shared.a.w(null,3,[shared.a.Z,shared.a.bq,shared.a.jm,shared.a.Za,shared.a.pl,new shared.a.w(null,3,[shared.a.om,"should be null or cljs nil",shared.a.gp,"javascript null or cljs nil",shared.a.Tp,function(){function a(b){if(0<arguments.length)for(var c=0,d=Array(arguments.length-0);c<d.length;)d[c]=arguments[c+0],++c;return null}return a.B=0,a.D=function(b){return shared.a.J(b),null},a.j=function(){return null},a}()],null)],null)),Ws=RegExp,Xs=spec_Rs.j(new shared.a.X(null,2,5,shared.a.Y,[shared.a.ml,/^0(x|X)?[a-fA-F0-9]+$/],null),shared.a.R([shared.a.Z,Ds,shared.a.Tp,function(){return["0x",shared.a.C.g(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))].join("")},shared.a.om,"invalid hex string",shared.a.gp,"hexadecimal string"])),Ys=shared.a.Br(new shared.a.w(null,3,[shared.a.Z,ws,shared.a.jm,function(){return shared.a.Q.g(void 0)},shared.a.pl,new shared.a.w(null,3,[shared.a.om,"should be undefined",shared.a.gp,"javascript undefined",shared.a.Tp,function(){function a(b){if(0<arguments.length)for(var c=0,d=Array(arguments.length-0);c<d.length;)d[c]=arguments[c+0],++c}return a.B=0,a.D=function(b){shared.a.J(b)},a.j=function(){},a}()],null)],null)),Zs=spec_Rs.j(new shared.a.X(null,7,5,shared.a.Y,[shared.a.iq,"latest_mined","latest_confirmed","latest_state","latest_checkpoint","earliest",null],null),shared.a.R([shared.a.Z,As,shared.a.om,"must be one of latest_mined, latest_confirmed, latest_state, latest_checkpoint, earliest or null",shared.a.gp,"one of latest_mined, latest_confirmed, latest_state, latest_checkpoint, earliest or null"])),$s=spec_Rs.j(new shared.a.X(null,3,5,shared.a.Y,[shared.a.go,Zs,Xs],null),shared.a.R([shared.a.Z,ts,shared.a.om,"invalid epoch ref, check the doc at https://developer.conflux-chain.org/conflux-doc/docs/json_rpc#the-epoch-number-parameter",shared.a.gp,"epoch number tag, check the doc at https://developer.conflux-chain.org/conflux-doc/docs/json_rpc#the-epoch-number-parameter"])),at=spec_Rs.j(new shared.a.X(null,4,5,shared.a.Y,[shared.a.iq,"latest","earliest","pending"],null),shared.a.R([shared.a.Z,As,shared.a.om,"invalid block tag, must be one of latest pending or earliest",shared.a.gp,"one of latest pending or earliest"])),bt=spec_Rs.j(new shared.a.X(null,3,5,shared.a.Y,[shared.a.go,at,Xs],null),shared.a.R([shared.a.Z,ts,shared.a.om,"invalid block ref, must be one of latest, pwnding, earliest, block number or null",shared.a.gp,"one of latest, pwnding, earliest, block number or null"]));spec_Rs.j(new shared.a.X(null,4,5,shared.a.Y,[shared.a.iq,"builtin","user","contract"],null),shared.a.R([shared.a.Z,Gs,shared.a.om,"invalid conflux user type, must be one of builtin user contract",shared.a.gp,"one of builtin user contract"])),shared.a.yi,shared.a.In,shared.a.Md,shared.a.ye,shared.a.yo,shared.a.qp,shared.a.fq,shared.a.No,shared.a.iq,ex_spec_boolean=shared.a.Pn,shared.a.Ld,ex_spec_map=shared.a.qp,shared.a.fb,ex_spec_addressType=Us,ex_spec_networkId=Ts,shared.a.Pp,shared.a.qe,shared.a.Ed,shared.a.hd,shared.a.pe,shared.a.fq,shared.a.De,ex_spec_defBase32AddressSchemaFactory=function(a,b){return Js=shared.a.Br((function(c){c=shared.a.W(c);var d=shared.a.T.h(c,js);return new shared.a.w(null,3,[shared.a.Z,ls(null,d),shared.a.jm,function(e){return a.h?a.h(e,d):a.call(null,e,d)},shared.a.pl,new shared.a.w(null,3,[shared.a.om,["Invalid base32 address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.gp,["Base32 address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.Tp,function(){return b.call(null,d)}],null)],null)})),Ks=shared.a.Br((function(c){c=shared.a.W(c);var d=shared.a.T.h(c,js);return new shared.a.w(null,3,[shared.a.Z,ls("user",d),shared.a.jm,function(e){return a.i?a.i(e,"user",d):a.call(null,e,"user",d)},shared.a.pl,new shared.a.w(null,3,[shared.a.om,["Invalid base32 user address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.gp,["Base32 user address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.Tp,function(){return b.call(null,d)}],null)],null)})),Ls=shared.a.Br((function(c){c=shared.a.W(c);var d=shared.a.T.h(c,js);return new shared.a.w(null,3,[shared.a.Z,ls("contract",d),shared.a.jm,function(e){return a.i?a.i(e,"contract",d):a.call(null,e,"contract",d)},shared.a.pl,new shared.a.w(null,3,[shared.a.om,["Invalid base32 contract address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.gp,["Base32 contract address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.Tp,function(){return b.call(null,d)}],null)],null)})),Ms=shared.a.Br((function(c){c=shared.a.W(c);var d=shared.a.T.h(c,js);return new shared.a.w(null,3,[shared.a.Z,ls("builtin",d),shared.a.jm,function(e){return a.i?a.i(e,"builtin",d):a.call(null,e,"builtin",d)},shared.a.pl,new shared.a.w(null,3,[shared.a.om,["Invalid base32 builtin address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.gp,["Base32 builtin address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.Tp,function(){return b.call(null,d)}],null)],null)})),Ns=shared.a.Br((function(c){c=shared.a.W(c);var d=shared.a.T.h(c,js);return new shared.a.w(null,3,[shared.a.Z,ls("null",d),shared.a.jm,function(e){return a.i?a.i(e,"null",d):a.call(null,e,"null",d)},shared.a.pl,new shared.a.w(null,3,[shared.a.om,["Invalid base32 null address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.gp,["Base32 null address",shared.a.y(d)?[", with network id ",shared.a.C.g(d)].join(""):""].join(""),shared.a.Tp,function(){return b.call(null,d)}],null)],null)})),is=new shared.a.X(null,5,5,shared.a.Y,[Js,Ks,Ls,Ms,Ns],null)},ex_spec_cat=shared.a.ao,shared.a.Sk,shared.a.ko,shared.a.dq,ex_spec_zeroOrOne=shared.a.wo,ex_spec_epochTag=Zs,shared.a.Co,shared.a.wo,shared.a.dq,shared.a.Xp,ex_spec_stringp=shared.a.eb,shared.a.Iq,shared.a.Rd,shared.a.Xc,shared.a.Tn,ex_spec_int=shared.a.ho,shared.a.ab,shared.a.Bp,shared.a.Nd,shared.a.Gd,ex_spec_password=Ss,shared.a.Lq,shared.a.Ak,shared.a.Jd,shared.a.Zp,shared.a.Wd,shared.a.Ko,shared.a.Bd,shared.a.Do,shared.a.jq,shared.a.Cd,shared.a.Ud,ex_spec_or=shared.a.go,ex_spec_nul=Vs,shared.a.ml,shared.a.Td,shared.a.db,shared.a.Ad,shared.a.Kq,shared.a.oe,shared.a.Gq,shared.a.qn,shared.a.zd,ex_spec_defRestSchemas=function(a){a=hs(a),a=shared.a.W(a);var b=shared.a.T.h(a,rs),c=shared.a.T.h(a,us),d=shared.a.T.h(a,qs),e=shared.a.T.h(a,Cs),f=shared.a.T.h(a,Fs),g=shared.a.T.h(a,Es),k=shared.a.T.h(a,zs),h=shared.a.T.h(a,ss);return a=shared.a.ci(b),{hdPath:shared.a.Br(new shared.a.w(null,3,[shared.a.Z,Bs,shared.a.jm,function(m){var n="string"==typeof m;return n?k.g?k.g(m):k.call(null,m):n},shared.a.pl,new shared.a.w(null,3,[shared.a.om,"should be a valid hdPath without the last address index",shared.a.gp,"hd wallet derivation path without the last address_index, check https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki#abstract for detail",shared.a.Tp,function(){return h.call()}],null)],null)),mnemonic:shared.a.Br(new shared.a.w(null,3,[shared.a.Z,shared.a.Np,shared.a.jm,function(m){var n="string"==typeof m;return n?e.g?e.g(m):e.call(null,m):n},shared.a.pl,new shared.a.w(null,3,[shared.a.om,"should be a valid mnemonic",shared.a.gp,"Mnemonic phrase",shared.a.Tp,function(){return f.call()}],null)],null)),privateKey:shared.a.Br(new shared.a.w(null,3,[shared.a.Z,ns,shared.a.jm,function(m){return g.g?g.g(m):g.call(null,m)},shared.a.pl,new shared.a.w(null,3,[shared.a.om,"invalid private key",shared.a.gp,"0x-prefixed private key",shared.a.Tp,function(){return d.call()}],null)],null)),ethHexAddress:spec_Rs.j(new shared.a.X(null,2,5,shared.a.Y,[shared.a.ml,/^0x[0-9a-fA-F]{40}$/],null),shared.a.R([shared.a.Tp,function(){return c.call()},shared.a.om,"invalid hex address",shared.a.gp,"0x-prefixed address"])),hexUserAddress:spec_Rs.j(new shared.a.X(null,2,5,shared.a.Y,[shared.a.ml,/^0x1[0-9a-fA-F]{39}$/],null),shared.a.R([shared.a.Z,ps,shared.a.Tp,function(){return c.call(null,"user")},shared.a.om,"invalid hex user address",shared.a.gp,"Conflux hex user address"])),hexContractAddress:spec_Rs.j(new shared.a.X(null,2,5,shared.a.Y,[shared.a.ml,/^0x8[0-9a-fA-F]{39}$/],null),shared.a.R([shared.a.Z,os,shared.a.om,"invalid hex contract address",shared.a.gp,"Conflux hex user address",shared.a.Tp,function(){return c.call(null,"contract")}])),hexBuiltInAddress:spec_Rs.j(shared.a.ih.h(new shared.a.X(null,1,5,shared.a.Y,[shared.a.iq],null),a),shared.a.R([shared.a.Z,vs,shared.a.om,["invalid hex builtin address, can only be one of ",shared.a.C.g(a)].join(""),shared.a.gp,"Hex address of conflux internal contract, can be found at https://confluxscan.io/contracts",shared.a.zn,a])),hexNullAddress:spec_Rs.j(new shared.a.X(null,2,5,shared.a.Y,[shared.a.Tn,"0x0000000000000000000000000000000000000000"],null),shared.a.R([shared.a.Z,ys,shared.a.gp,"Null address: 0x0000000000000000000000000000000000000000",shared.a.om,"invalid hex null address, should be 0x0000000000000000000000000000000000000000"]))}},ex_spec_string=shared.a.Dn,shared.a.Ko,shared.a.Mh,shared.a.Ep,ex_spec_epochRef=$s,shared.a.Ed,shared.a.Ic,shared.a.Sd,shared.a.on,ex_spec_integer=shared.a.Qd,shared.a.Xd,shared.a.te,shared.a.Fo,shared.a.Mq,shared.a.Op,shared.a.eq,shared.a.On,ex_spec_truep=shared.a.Kd,shared.a.gb,shared.a.Dd,shared.a.ko,shared.a.Be,shared.a.vn,shared.a.eo,shared.a.Ip,shared.a.vi,shared.a.Ce,shared.a.Yk;var consts=__webpack_require__(1318),account=__webpack_require__(1307),src=__webpack_require__(1320),base32_address=__webpack_require__(1311),hdkey=__webpack_require__(1321);function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _defRestSchemas=ex_spec_defRestSchemas({INTERNAL_CONTRACTS_HEX_ADDRESS:consts.b,NULL_HEX_ADDRESS:consts.c,validatePrivateKey:account.g,randomHexAddress:account.d,randomCfxHexAddress:account.c,randomPrivateKey:account.e,validateMnemonic:src.validateMnemonic,generateMnemonic:src.generateMnemonic,validateHDPath:hdkey.c,randomHDPath:hdkey.b}),ethHexAddress=_defRestSchemas.ethHexAddress,mnemonic=(_defRestSchemas.hexUserAddress,_defRestSchemas.hexContractAddress,_defRestSchemas.hexBuiltInAddress,_defRestSchemas.hexNullAddress,_defRestSchemas.mnemonic),privateKey=_defRestSchemas.privateKey,_defBase32AddressSche2=(_defRestSchemas.hdPath,function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ex_spec_defBase32AddressSchemaFactory(base32_address.d,base32_address.c),5)),base32Address=_defBase32AddressSche2[0],base32UserAddress=_defBase32AddressSche2[1],base32ContractAddress=_defBase32AddressSche2[2],dbid=(_defBase32AddressSche2[3],_defBase32AddressSche2[4],ex_spec_integer)},1307:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return toAccountAddress})),__webpack_require__.d(__webpack_exports__,"d",(function(){return randomHexAddress})),__webpack_require__.d(__webpack_exports__,"b",(function(){return randomAddressType})),__webpack_require__.d(__webpack_exports__,"c",(function(){return randomCfxHexAddress})),__webpack_require__.d(__webpack_exports__,"e",(function(){return randomPrivateKey})),__webpack_require__.d(__webpack_exports__,"g",(function(){return validatePrivateKey})),__webpack_require__.d(__webpack_exports__,"a",(function(){return fromPrivate}));var random=function(bytes){var rnd;if("undefined"==typeof window||!window.crypto||!window.crypto.getRandomValues)throw"Safe random numbers not available.";rnd=window.crypto.getRandomValues(new Uint8Array(bytes));for(var hex="0x",i=0;i<bytes;++i)hex+=("00"+rnd[i].toString(16)).slice(-2);return hex},pad=function(l,hex){return hex.length===2*l+2?hex:pad(l,"0x0"+hex.slice(2))},concat=function(a,b){return a.concat(b.slice(2))},fromNat=function(bn){return"0x0"===bn?"0x":bn.length%2==0?bn:"0x0"+bn.slice(2)},lib_bn=__webpack_require__(1490),bn_default=__webpack_require__.n(lib_bn),toBN=function(str){return new bn_default.a(str.slice(2),16)},nat_fromString=function(str){var bn="0x"+("0x"===str.slice(0,2)?new bn_default.a(str.slice(2),16):new bn_default.a(str,10)).toString("hex");return"0x0"===bn?"0x":bn},bin=function(method){return function(a,b){return"0x"+toBN(a)[method](toBN(b)).toString("hex")}},elliptic=(bin("add"),bin("mul"),bin("div"),bin("sub"),__webpack_require__(254)),elliptic_default=__webpack_require__.n(elliptic),HEX_CHARS="0123456789abcdef".split(""),KECCAK_PADDING=[1,256,65536,16777216],SHIFT=[0,8,16,24],RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],f=function(s){var h,l,n,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16,b17,b18,b19,b20,b21,b22,b23,b24,b25,b26,b27,b28,b29,b30,b31,b32,b33,b34,b35,b36,b37,b38,b39,b40,b41,b42,b43,b44,b45,b46,b47,b48,b49;for(n=0;n<48;n+=2)c0=s[0]^s[10]^s[20]^s[30]^s[40],c1=s[1]^s[11]^s[21]^s[31]^s[41],c2=s[2]^s[12]^s[22]^s[32]^s[42],c3=s[3]^s[13]^s[23]^s[33]^s[43],c4=s[4]^s[14]^s[24]^s[34]^s[44],c5=s[5]^s[15]^s[25]^s[35]^s[45],c6=s[6]^s[16]^s[26]^s[36]^s[46],c7=s[7]^s[17]^s[27]^s[37]^s[47],h=(c8=s[8]^s[18]^s[28]^s[38]^s[48])^(c2<<1|c3>>>31),l=(c9=s[9]^s[19]^s[29]^s[39]^s[49])^(c3<<1|c2>>>31),s[0]^=h,s[1]^=l,s[10]^=h,s[11]^=l,s[20]^=h,s[21]^=l,s[30]^=h,s[31]^=l,s[40]^=h,s[41]^=l,h=c0^(c4<<1|c5>>>31),l=c1^(c5<<1|c4>>>31),s[2]^=h,s[3]^=l,s[12]^=h,s[13]^=l,s[22]^=h,s[23]^=l,s[32]^=h,s[33]^=l,s[42]^=h,s[43]^=l,h=c2^(c6<<1|c7>>>31),l=c3^(c7<<1|c6>>>31),s[4]^=h,s[5]^=l,s[14]^=h,s[15]^=l,s[24]^=h,s[25]^=l,s[34]^=h,s[35]^=l,s[44]^=h,s[45]^=l,h=c4^(c8<<1|c9>>>31),l=c5^(c9<<1|c8>>>31),s[6]^=h,s[7]^=l,s[16]^=h,s[17]^=l,s[26]^=h,s[27]^=l,s[36]^=h,s[37]^=l,s[46]^=h,s[47]^=l,h=c6^(c0<<1|c1>>>31),l=c7^(c1<<1|c0>>>31),s[8]^=h,s[9]^=l,s[18]^=h,s[19]^=l,s[28]^=h,s[29]^=l,s[38]^=h,s[39]^=l,s[48]^=h,s[49]^=l,b0=s[0],b1=s[1],b32=s[11]<<4|s[10]>>>28,b33=s[10]<<4|s[11]>>>28,b14=s[20]<<3|s[21]>>>29,b15=s[21]<<3|s[20]>>>29,b46=s[31]<<9|s[30]>>>23,b47=s[30]<<9|s[31]>>>23,b28=s[40]<<18|s[41]>>>14,b29=s[41]<<18|s[40]>>>14,b20=s[2]<<1|s[3]>>>31,b21=s[3]<<1|s[2]>>>31,b2=s[13]<<12|s[12]>>>20,b3=s[12]<<12|s[13]>>>20,b34=s[22]<<10|s[23]>>>22,b35=s[23]<<10|s[22]>>>22,b16=s[33]<<13|s[32]>>>19,b17=s[32]<<13|s[33]>>>19,b48=s[42]<<2|s[43]>>>30,b49=s[43]<<2|s[42]>>>30,b40=s[5]<<30|s[4]>>>2,b41=s[4]<<30|s[5]>>>2,b22=s[14]<<6|s[15]>>>26,b23=s[15]<<6|s[14]>>>26,b4=s[25]<<11|s[24]>>>21,b5=s[24]<<11|s[25]>>>21,b36=s[34]<<15|s[35]>>>17,b37=s[35]<<15|s[34]>>>17,b18=s[45]<<29|s[44]>>>3,b19=s[44]<<29|s[45]>>>3,b10=s[6]<<28|s[7]>>>4,b11=s[7]<<28|s[6]>>>4,b42=s[17]<<23|s[16]>>>9,b43=s[16]<<23|s[17]>>>9,b24=s[26]<<25|s[27]>>>7,b25=s[27]<<25|s[26]>>>7,b6=s[36]<<21|s[37]>>>11,b7=s[37]<<21|s[36]>>>11,b38=s[47]<<24|s[46]>>>8,b39=s[46]<<24|s[47]>>>8,b30=s[8]<<27|s[9]>>>5,b31=s[9]<<27|s[8]>>>5,b12=s[18]<<20|s[19]>>>12,b13=s[19]<<20|s[18]>>>12,b44=s[29]<<7|s[28]>>>25,b45=s[28]<<7|s[29]>>>25,b26=s[38]<<8|s[39]>>>24,b27=s[39]<<8|s[38]>>>24,b8=s[48]<<14|s[49]>>>18,b9=s[49]<<14|s[48]>>>18,s[0]=b0^~b2&b4,s[1]=b1^~b3&b5,s[10]=b10^~b12&b14,s[11]=b11^~b13&b15,s[20]=b20^~b22&b24,s[21]=b21^~b23&b25,s[30]=b30^~b32&b34,s[31]=b31^~b33&b35,s[40]=b40^~b42&b44,s[41]=b41^~b43&b45,s[2]=b2^~b4&b6,s[3]=b3^~b5&b7,s[12]=b12^~b14&b16,s[13]=b13^~b15&b17,s[22]=b22^~b24&b26,s[23]=b23^~b25&b27,s[32]=b32^~b34&b36,s[33]=b33^~b35&b37,s[42]=b42^~b44&b46,s[43]=b43^~b45&b47,s[4]=b4^~b6&b8,s[5]=b5^~b7&b9,s[14]=b14^~b16&b18,s[15]=b15^~b17&b19,s[24]=b24^~b26&b28,s[25]=b25^~b27&b29,s[34]=b34^~b36&b38,s[35]=b35^~b37&b39,s[44]=b44^~b46&b48,s[45]=b45^~b47&b49,s[6]=b6^~b8&b0,s[7]=b7^~b9&b1,s[16]=b16^~b18&b10,s[17]=b17^~b19&b11,s[26]=b26^~b28&b20,s[27]=b27^~b29&b21,s[36]=b36^~b38&b30,s[37]=b37^~b39&b31,s[46]=b46^~b48&b40,s[47]=b47^~b49&b41,s[8]=b8^~b0&b2,s[9]=b9^~b1&b3,s[18]=b18^~b10&b12,s[19]=b19^~b11&b13,s[28]=b28^~b20&b22,s[29]=b29^~b21&b23,s[38]=b38^~b30&b32,s[39]=b39^~b31&b33,s[48]=b48^~b40&b42,s[49]=b49^~b41&b43,s[0]^=RC[n],s[1]^=RC[n+1]},keccak=function(bits){return function(str){var msg;if("0x"===str.slice(0,2)){msg=[];for(var i=2,l=str.length;i<l;i+=2)msg.push(parseInt(str.slice(i,i+2),16))}else msg=str;return function(state,message){for(var i,code,length=message.length,blocks=state.blocks,byteCount=state.blockCount<<2,blockCount=state.blockCount,outputBlocks=state.outputBlocks,s=state.s,index=0;index<length;){if(state.reset)for(state.reset=!1,blocks[0]=state.block,i=1;i<blockCount+1;++i)blocks[i]=0;if("string"!=typeof message)for(i=state.start;index<length&&i<byteCount;++index)blocks[i>>2]|=message[index]<<SHIFT[3&i++];else for(i=state.start;index<length&&i<byteCount;++index)(code=message.charCodeAt(index))<128?blocks[i>>2]|=code<<SHIFT[3&i++]:code<2048?(blocks[i>>2]|=(192|code>>6)<<SHIFT[3&i++],blocks[i>>2]|=(128|63&code)<<SHIFT[3&i++]):code<55296||code>=57344?(blocks[i>>2]|=(224|code>>12)<<SHIFT[3&i++],blocks[i>>2]|=(128|code>>6&63)<<SHIFT[3&i++],blocks[i>>2]|=(128|63&code)<<SHIFT[3&i++]):(code=65536+((1023&code)<<10|1023&message.charCodeAt(++index)),blocks[i>>2]|=(240|code>>18)<<SHIFT[3&i++],blocks[i>>2]|=(128|code>>12&63)<<SHIFT[3&i++],blocks[i>>2]|=(128|code>>6&63)<<SHIFT[3&i++],blocks[i>>2]|=(128|63&code)<<SHIFT[3&i++]);if(state.lastByteIndex=i,i>=byteCount){for(state.start=i-byteCount,state.block=blocks[blockCount],i=0;i<blockCount;++i)s[i]^=blocks[i];f(s),state.reset=!0}else state.start=i}if(blocks[(i=state.lastByteIndex)>>2]|=KECCAK_PADDING[3&i],state.lastByteIndex===byteCount)for(blocks[0]=blocks[blockCount],i=1;i<blockCount+1;++i)blocks[i]=0;for(blocks[blockCount-1]|=2147483648,i=0;i<blockCount;++i)s[i]^=blocks[i];f(s);for(var block,hex="",k=0,j=0;j<outputBlocks;){for(k=0;k<blockCount&&j<outputBlocks;++k,++j)block=s[k],hex+=HEX_CHARS[block>>4&15]+HEX_CHARS[15&block]+HEX_CHARS[block>>12&15]+HEX_CHARS[block>>8&15]+HEX_CHARS[block>>20&15]+HEX_CHARS[block>>16&15]+HEX_CHARS[block>>28&15]+HEX_CHARS[block>>24&15];j%blockCount==0&&(f(s),k=0)}return"0x"+hex}(function(bits){return{blocks:[],reset:!0,block:0,start:0,blockCount:1600-(bits<<1)>>5,outputBlocks:bits>>5,s:(s=[0,0,0,0,0,0,0,0,0,0],[].concat(s,s,s,s,s))};var s}(bits),msg)}},keccak256=keccak(256),keccak256s=(keccak(512),keccak(256)),node_modules_buffer=(keccak(512),__webpack_require__(52)),utils=__webpack_require__(1310),consts=__webpack_require__(1318);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var addToV,secp256k1=elliptic_default.a.ec("secp256k1"),create=function(entropy){var innerHex=keccak256(concat(random(32),entropy||random(32))),middleHex=concat(concat(random(32),innerHex),random(32)),outerHex=keccak256(middleHex);return fromPrivate(outerHex)},toChecksum=function(address){for(var addressHash=keccak256s(address.slice(2)),checksumAddress="0x",i=0;i<40;i++)checksumAddress+=parseInt(addressHash[i+2],16)>7?address[i+2].toUpperCase():address[i+2];return checksumAddress},fromPrivate=function(privateKey){var buffer=node_modules_buffer.Buffer.from(privateKey.slice(2),"hex"),publicKey="0x"+secp256k1.keyFromPrivate(buffer).getPublic(!1,"hex").slice(2),publicHash=keccak256(publicKey);return{address:toChecksum("0x"+publicHash.slice(-40)),privateKey:privateKey}},toAccountAddress=(addToV=27,function(address){return address.replace(/^0x./,"0x1")}),randomHexAddress=function(type,entropy){if(type&&!consts.a.includes(type))throw new Error("Invalid address type "+type);if("builtin"===type)return consts.b[Object(utils.a)(consts.b.length)];if("null"===type)return consts.c;var addr=create(entropy).address;return"user"===type?toAccountAddress(addr):"contract"===type?addr.replace(/^0x./,"0x8"):addr},randomAddressType=function(){return consts.a[Object(utils.a)(consts.a.length)]},randomCfxHexAddress=function(entropy){return randomHexAddress(randomAddressType(),entropy)},randomPrivateKey=function(entropy){return create(entropy).privateKey},validatePrivateKey=function(privateKey){var valid=!1;try{var rst=fromPrivate(privateKey);valid=Boolean(rst.address)}catch(err){valid=!1}return valid}},1310:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return randomInt}));__webpack_require__(132);var strip_hex_prefix__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1319),strip_hex_prefix__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(strip_hex_prefix__WEBPACK_IMPORTED_MODULE_1__);__webpack_require__.d(__webpack_exports__,"b",(function(){return strip_hex_prefix__WEBPACK_IMPORTED_MODULE_1___default.a}));__webpack_require__(1312);var randomInt=function(a){return Math.floor(Math.random()*a)}},1311:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return base32_address_encode})),__webpack_require__.d(__webpack_exports__,"a",(function(){return base32_address_decode})),__webpack_require__.d(__webpack_exports__,"d",(function(){return validateBase32Address})),__webpack_require__.d(__webpack_exports__,"c",(function(){return randomBase32Address}));for(var bn=__webpack_require__(1502),bn_default=__webpack_require__.n(bn),ALPHABET="abcdefghjkmnprstuvwxyz0123456789",ALPHABET_MAP={},z=0;z<ALPHABET.length;z++){var x=ALPHABET.charAt(z);if(void 0!==ALPHABET_MAP[x])throw new TypeError(x+" is ambiguous");ALPHABET_MAP[x]=z}function polymodStep(pre){var b=pre.shrn(35),mask=new bn_default.a("07ffffffff",16),v=pre.and(mask).shln(5);return b.and(new bn_default.a("1")).toNumber()>0&&(v=v.xor(new bn_default.a("98f2bc8e61",16))),b.and(new bn_default.a("2")).toNumber()&&(v=v.xor(new bn_default.a("79b76d99e2",16))),b.and(new bn_default.a("4")).toNumber()&&(v=v.xor(new bn_default.a("f33e5fb3c4",16))),b.and(new bn_default.a("8")).toNumber()&&(v=v.xor(new bn_default.a("ae2eabe2a8",16))),b.and(new bn_default.a("16")).toNumber()&&(v=v.xor(new bn_default.a("1e4f43e470",16))),v}function prefixChk(prefix){for(var chk=new bn_default.a("1"),i=0;i<prefix.length;++i){var c=prefix.charCodeAt(i),mixwith=new bn_default.a(""+(31&c));chk=polymodStep(chk).xor(mixwith)}return chk=polymodStep(chk)}function encode(prefix,words){if(prefix.length+8+1+words.length>90)throw new TypeError("Exceeds Base32 maximum length");for(var chk=prefixChk(prefix=prefix.toLowerCase()),result=prefix+":",i=0;i<words.length;++i){var _x=words[i];if(_x>>>5!=0)throw new Error("Non 5-bit word");chk=polymodStep(chk).xor(new bn_default.a(_x,16)),result+=ALPHABET.charAt(_x)}for(var _i=0;_i<8;++_i)chk=polymodStep(chk);chk=chk.xor(new bn_default.a("1"));for(var _i2=0;_i2<8;++_i2){var pos=5*(7-_i2),v2=chk.shrn(pos).and(new bn_default.a("1f",16));result+=ALPHABET.charAt(v2.toString(10))}return result}function convert(data,inBits,outBits,pad){for(var value=0,bits=0,maxV=(1<<outBits)-1,result=[],i=0;i<data.length;++i)for(value=value<<inBits|data[i],bits+=inBits;bits>=outBits;)bits-=outBits,result.push(value>>>bits&maxV);if(pad)bits>0&&result.push(value<<outBits-bits&maxV);else{if(bits>=inBits)throw new Error("Excess padding");if(value<<outBits-bits&maxV)throw new Error("Non-zero padding")}return result}function toWords(bytes){return convert(bytes,8,5,!0)}var buffer=__webpack_require__(52),account=__webpack_require__(1307),utils=__webpack_require__(1310);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function encodeNetId(netId){if(!Number.isInteger(netId))throw new Error("netId should be passed as an integer");if(netId<=0||netId>4294967295)throw new Error("netId should be passed as in range [1, 0xFFFFFFFF]");switch(netId){case 1:return"cfxtest";case 1029:return"cfx";default:return"net"+netId}}function decodeNetId(payload){switch(payload){case"cfxtest":return 1;case"cfx":return 1029;default:var prefix=payload.slice(0,3),netId=payload.slice(3);if("net"!==prefix||!function isValidNetId(netId){return/^([1-9]\d*)$/.test(netId)&&Number(netId)<=4294967295}(netId))throw new Error("netId prefix should be passed by 'cfx', 'cfxtest' or 'net[n]' ");if(1===Number(netId)||1029===Number(netId))throw new Error("net1 or net1029 are invalid");return Number(netId)}}function encodePayload(hexAddress){return buffer.Buffer.concat([buffer.Buffer.from([0]),hexAddress])}function decodePayload(payload){if(0!==payload[0])throw new Error("Can not recognize version byte");return buffer.Buffer.from(payload.slice(1))}function getAddressType(hexAddress){if(hexAddress.length<1)throw new Error("Empty payload in address");switch(240&hexAddress[0]){case 16:return"user";case 128:return"contract";case 0:var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=o[Symbol.iterator]()},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(e){didErr=!0,err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(hexAddress);try{for(_iterator.s();!(_step=_iterator.n()).done;){if(0!==_step.value)return"builtin"}}catch(err){_iterator.e(err)}finally{_iterator.f()}return"null";default:throw new Error("hexAddress should start with 0x0, 0x1 or 0x8")}}function base32_address_encode(hexAddress,netId){var verbose=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(hexAddress instanceof buffer.Buffer||(hexAddress=buffer.Buffer.from(Object(utils.b)(hexAddress),"hex")),hexAddress.length<20)throw new Error("hexAddress should be at least 20 bytes");var addressType=getAddressType(hexAddress),encodedAddress=encode(encodeNetId(netId),toWords(encodePayload(hexAddress)));if(verbose){var _encodedAddress$split=encodedAddress.split(":"),_encodedAddress$split2=_slicedToArray(_encodedAddress$split,2),prefix=_encodedAddress$split2[0],payload=_encodedAddress$split2[1];encodedAddress=[prefix,"type."+addressType,payload].join(":").toUpperCase()}return encodedAddress}function base32_address_decode(address){var lowered=address.toLowerCase(),uppered=address.toUpperCase();if(address!==lowered&&address!==uppered)throw new Error("Mixed-case address "+address);var splits=address.split(":"),shouldHaveType="",reducedAddress=address;3===splits.length&&(shouldHaveType=splits[1],reducedAddress=[splits[0],splits[2]].join(":"));var result=function decode(str){if(str.length<8)throw new TypeError(str+" too short");if(str.length>90)throw new TypeError(str+" too long");var lowered=str.toLowerCase(),uppered=str.toUpperCase();if(str!==lowered&&str!==uppered)throw new Error("Mixed-case string "+str);var split=lowered.lastIndexOf(":");if(-1===split)throw new Error("No separator character for "+lowered);if(0===split)throw new Error("Missing prefix for "+lowered);var prefix=lowered.slice(0,split),wordChars=lowered.slice(split+1);if(wordChars.length<6)throw new Error("Data too short");for(var chk=prefixChk(prefix),words=[],i=0;i<wordChars.length;++i){var c=wordChars.charAt(i),v=ALPHABET_MAP[c];if(void 0===v)throw new Error("Unknown character "+c);chk=polymodStep(chk).xor(new bn_default.a(""+v)),i+8>=wordChars.length||words.push(v)}if("1"!==chk.toString(10))throw new Error("Invalid checksum for "+lowered);return{prefix:prefix,words:words}}(reducedAddress),data=function fromWords(words){return convert(words,5,8,!1)}(result.words);if(data.length<1)throw new Error("Empty payload in address");var returnValue={hexAddress:decodePayload(data),netId:decodeNetId(result.prefix),type:getAddressType(decodePayload(data))};if(""!==shouldHaveType&&"type."+returnValue.type!==shouldHaveType.toLowerCase())throw new Error("Type of address doesn't match");return returnValue}function validateBase32Address(address){var netId,type,decoded,valid=!1;if(null!=(arguments.length<=1?void 0:arguments[1]))if(Number.isSafeInteger(arguments.length<=1?void 0:arguments[1]))netId=arguments.length<=1?void 0:arguments[1];else{if("string"!=typeof(arguments.length<=1?void 0:arguments[1]))throw new Error("Invalid type or networkId, type must be string, networkId must be number");type=arguments.length<=1?void 0:arguments[1]}if(null!=(arguments.length<=2?void 0:arguments[2]))if(Number.isSafeInteger(arguments.length<=2?void 0:arguments[2]))netId=arguments.length<=2?void 0:arguments[2];else{if("string"!=typeof(arguments.length<=2?void 0:arguments[2]))throw new Error("Invalid type or networkId, type must be string, networkId must be number");type=arguments.length<=2?void 0:arguments[2]}try{decoded=base32_address_decode(address),valid=!0,void 0!==netId&&netId!==decoded.netId&&(valid=!1),void 0!==type&&type!==decoded.type&&(valid=!1)}catch(err){valid=!1}return valid}var randomBase32Address=function(){var netId,type;if(null!=(arguments.length<=0?void 0:arguments[0]))if(Number.isSafeInteger(arguments.length<=0?void 0:arguments[0]))netId=arguments.length<=0?void 0:arguments[0];else{if("string"!=typeof(arguments.length<=0?void 0:arguments[0]))throw new Error("Invalid type or networkId, type must be string, networkId must be number");type=arguments.length<=0?void 0:arguments[0]}if(null!=(arguments.length<=1?void 0:arguments[1]))if(Number.isSafeInteger(arguments.length<=1?void 0:arguments[1]))netId=arguments.length<=1?void 0:arguments[1];else{if("string"!=typeof(arguments.length<=1?void 0:arguments[1]))throw new Error("Invalid type or networkId, type must be string, networkId must be number");type=arguments.length<=1?void 0:arguments[1]}void 0===type&&(type=Object(account.b)()),void 0===netId&&(netId=1029);var hexAddress=Object(utils.b)(Object(account.d)(type));return base32_address_encode(buffer.Buffer.from(hexAddress,"hex"),netId)}},1318:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return NULL_HEX_ADDRESS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return INTERNAL_CONTRACTS_HEX_ADDRESS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ADDRESS_TYPES}));var NULL_HEX_ADDRESS="0x0000000000000000000000000000000000000000",INTERNAL_CONTRACTS_HEX_ADDRESS=["0x0888000000000000000000000000000000000000","0x0888000000000000000000000000000000000001","0x0888000000000000000000000000000000000002"],ADDRESS_TYPES=["user","contract","builtin","null"]},1321:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return randomHDPath})),__webpack_require__.d(__webpack_exports__,"c",(function(){return validateHDPath})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getNthAccountOfHDKey}));var bip39__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1320),ethereumjs_wallet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1322),_cfxjs_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1310),ethereum_cryptography_hdkey_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1346),buffer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(52);function randomHDPathIndex(){return Object(_cfxjs_utils__WEBPACK_IMPORTED_MODULE_2__.a)(ethereum_cryptography_hdkey_js__WEBPACK_IMPORTED_MODULE_3__.HDKey.HARDENED_OFFSET)}var randomHDPath=function(){return`m/44'/${randomHDPathIndex()}'/${randomHDPathIndex()}'/${Object(_cfxjs_utils__WEBPACK_IMPORTED_MODULE_2__.a)(randomHDPathIndex())}`},validateHDPath=function(hdPath){var valid=!0;try{var levels=hdPath.split("/");valid=(valid=valid&&5===levels.length&&"m"===levels[0]&&"44'"===levels[1]&&levels[2].endsWith("'")&&levels[3].endsWith("'"))&&Boolean(ethereumjs_wallet__WEBPACK_IMPORTED_MODULE_1__.hdkey.fromMasterSeed(buffer__WEBPACK_IMPORTED_MODULE_4__.Buffer.from("df37c5b5fc335f2b448457104a591b0b8792ae4a60c484879d0114b84ca78b1b82503103b489e9087241cc4838561f2dcb43652702d58f8c45a3fa52d04696c3","hex")).derivePath(hdPath))}catch(err){valid=!1}return valid},getNthAccountOfHDKey=async function(_ref){for(var mnemonic=_ref.mnemonic,hdPath=_ref.hdPath,nth=_ref.nth,_ref$only0x1Prefixed=_ref.only0x1Prefixed,only0x1Prefixed=void 0!==_ref$only0x1Prefixed&&_ref$only0x1Prefixed,k=await async function(mnemonic){var hdPath=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m/44'/503'/0'/0",seed=await Object(bip39__WEBPACK_IMPORTED_MODULE_0__.mnemonicToSeed)(mnemonic);return ethereumjs_wallet__WEBPACK_IMPORTED_MODULE_1__.hdkey.fromMasterSeed(seed).derivePath(hdPath)}(mnemonic,hdPath),result={},count=0,idx=0;count<=nth;){var newWallet=k.deriveChild(idx++).getWallet();result.address="0x"+newWallet.getAddress().toString("hex"),result.privateKey="0x"+newWallet.getPrivateKey().toString("hex"),only0x1Prefixed&&result.address.startsWith("0x1")&&count++,only0x1Prefixed||count++}return result.index=idx-1,result}},1327:function(module,__webpack_exports__,__webpack_require__){"use strict";var _thi_ng_checks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1328);__webpack_require__.d(__webpack_exports__,"a",(function(){return _thi_ng_checks__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"b",(function(){return _thi_ng_checks__WEBPACK_IMPORTED_MODULE_0__.b}));__webpack_require__(1349)},1348:function(module,__webpack_exports__,__webpack_require__){"use strict";var _thi_ng_compose__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1351);__webpack_require__.d(__webpack_exports__,"a",(function(){return _thi_ng_compose__WEBPACK_IMPORTED_MODULE_0__.a})),__webpack_require__.d(__webpack_exports__,"b",(function(){return _thi_ng_compose__WEBPACK_IMPORTED_MODULE_0__.b}))},1350:function(module,__webpack_exports__,__webpack_require__){"use strict";var _cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1311),_cfxjs_fluent_wallet_consts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1318),_cfxjs_account__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1307),ADDR_TYPE_TO_PREFIX={user:"0x1",contract:"0x8",null:"0x0",builtin:"0x0"};__webpack_exports__.a=function(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},address=_ref.address,networkType=_ref.networkType,networkId=_ref.networkId,addressType=_ref.addressType,privateKey=_ref.privateKey;if("string"!=typeof address)throw new Error("Invalid address, must be a string");if(!["cfx","eth"].includes(networkType))throw new Error("Invalid networkType, must be cfx or eth");if(null!=networkId&&!Number.isSafeInteger(networkId))throw new Error("Invalid networkId, must be a safe integer");if("cfx"===networkType&&!Number.isSafeInteger(networkId))throw new Error("Invalid networkId, must be a safe integer");if(addressType&&!_cfxjs_fluent_wallet_consts__WEBPACK_IMPORTED_MODULE_1__.a.includes(addressType))throw new Error("Invalid addressType, must be one of "+_cfxjs_fluent_wallet_consts__WEBPACK_IMPORTED_MODULE_1__.a.toString());if("cfx"===networkType){if("null"===addressType&&(address="0x0000000000000000000000000000000000000000"),Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_0__.d)(address,networkId,addressType))return address;if(address.includes(":")){if(addressType&&!Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_0__.d)(address,addressType))throw new Error("Invalid base32 address, address type is invalid");return Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_0__.b)(Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_0__.a)(address).hexAddress,networkId,!0)}return addressType||(addressType="user"),Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_0__.b)(address.toLowerCase().replace(/0x./,ADDR_TYPE_TO_PREFIX[addressType]),networkId,!0)}if("eth"===networkType){if(address.includes(":")){if(privateKey)return Object(_cfxjs_account__WEBPACK_IMPORTED_MODULE_2__.a)(privateKey).address;throw new Error("Unable to convert base32 address into eth hex address without private key")}return address}}},1491:function(module,exports){},1503:function(module,exports){},1504:function(module,exports){},1537:function(module,exports){},257:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"cache",(function(){return cache})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),NAME="cfx_epochNumber",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.p,[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.v,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.i],_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.o]},permissions={locked:!0},cache={type:"ttl",ttl:500,key:function(_ref){return"EPOCH"+_ref.params[0]}},main=async function(_ref2){var f=_ref2.f,params=_ref2.params;return await f(params)}},258:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"cache",(function(){return cache})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),NAME="cfx_getAccount",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.f,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.b,[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.v,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.h]]},cache={type:"epoch",key:function(_ref){var params=_ref.params;return`${NAME}${params[0]}`}},permissions={locked:!0},main=async function(_ref2){var f=_ref2.f,params=_ref2.params;return await f(params)}},259:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),NAME="cfx_getBalance",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.f,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.b,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.h]},permissions={locked:!0},main=async function(_ref){var f=_ref.f,params=_ref.params;return await f(params)}},260:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"cache",(function(){return cache})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),NAME="cfx_getCode",cache={type:"epoch",ttl:3600,key:function(_ref){var params=_ref.params;return`${NAME}${params[0]}`}},schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.f,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.c,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.h]},permissions={locked:!0},main=async function(_ref2){var f=_ref2.f,params=_ref2.params;return await f(params)}},261:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),NAME="cfx_getNextNonce",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.f,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.d,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.h]},main=async function(_ref){var f=_ref.f,params=_ref.params;return await f(params)}},262:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"newAccounts",(function(){return newAccounts})),__webpack_require__.d(__webpack_exports__,"newAccountGroup",(function(){return newAccountGroup})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),browser_passworder__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1315),_cfxjs_compose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1348),_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1311),_cfxjs_account__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1307),_cfxjs_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1310);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var NAME="wallet_addVault",baseInputSchema=[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,{closed:!0},["password",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.q]],menomicSchema=[].concat(baseInputSchema,[["mnemonic",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.m]]),privateKeySchema=[].concat(baseInputSchema,[["privateKey",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.r]]),addressSchema=[].concat(baseInputSchema,[["address",[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.p,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.j,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.d]]]),schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.p,menomicSchema,privateKeySchema,addressSchema]},permissions={internal:!0,methods:["wallet_discoverAccounts","wallet_getBalance","wallet_getNextNonce","wallet_validatePassword"],db:["t","getById","getVault","createVault","getAccountGroup","getNetwork","getOneAccount"]};async function newAccounts(arg){var groupId=arg.groupId,wallet_discoverAccounts=arg.rpcs.wallet_discoverAccounts,vault=arg.vault,_arg$db=arg.db,getNetwork=_arg$db.getNetwork,t=_arg$db.t,getOneAccount=_arg$db.getOneAccount;"hd"!==vault.type?getNetwork().forEach((function(_ref){var _account$eid2,_account$eid,eid=_ref.eid,netId=_ref.netId,type=_ref.type,account=getOneAccount({index:0,accountGroup:groupId});"pk"!==vault.type?vault.cfxOnly&&"cfx"!==type||t([{eid:-1,address:{hex:vault.ddata,vault:vault.eid,network:eid}},vault.cfxOnly&&{eid:-1,address:{cfxHex:vault.ddata}},"cfx"===type&&{eid:-1,address:{base32:Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_3__.b)(vault.ddata,netId,!0)}},{eid:null!==(_account$eid2=null==account?void 0:account.eid)&&void 0!==_account$eid2?_account$eid2:-2,account:{index:0,nickname:"Account 1",address:-1,accountGroup:groupId,hidden:!1}}]):t([{eid:-1,address:{hex:Object(_cfxjs_account__WEBPACK_IMPORTED_MODULE_4__.a)(vault.ddata).address,pk:vault.ddata,vault:vault.eid,network:eid}},{eid:null!==(_account$eid=null==account?void 0:account.eid)&&void 0!==_account$eid?_account$eid:-2,account:{accountGroup:groupId,address:-1,index:0,nickname:"Account 1",hidden:!1}}])})):await wallet_discoverAccounts({accountGroupId:groupId,limit:10})}function newAccountGroup(arg){var _arg$db2=arg.db,getAccountGroup=_arg$db2.getAccountGroup,getNetwork=_arg$db2.getNetwork,getById=_arg$db2.getById,t=_arg$db2.t,vaultId=arg.vaultId,groups=getAccountGroup(),vault=getById(vaultId),groupName="Vault "+(groups.length+1),networks=getNetwork().reduce((function(acc,n){return vault.cfxOnly&&"cfx"===n.type||acc.push(n),acc}),[]),groupId=t([{eid:-1,accountGroup:{nickname:groupName,vault:vaultId,hidden:!1}}].concat(_toConsumableArray(networks.map((function(_ref2){return{eid:-1,accountGroup:{network:_ref2.eid}}}))))).tempids[-1];return newAccounts(Object.assign({},arg,{vault:vault,groupId:groupId})),groupId}async function main(arg){var _arg$db3=arg.db,createVault=_arg$db3.createVault,getVault=_arg$db3.getVault,wallet_validatePassword=arg.rpcs.wallet_validatePassword,_arg$params=arg.params,password=_arg$params.password,mnemonic=_arg$params.mnemonic,privateKey=_arg$params.privateKey,address=_arg$params.address,Err=arg.Err;if(!await wallet_validatePassword({password:password}))throw Err.InvalidParams("Invalid password");var vault={};if(vault.data=mnemonic||privateKey||address,privateKey)vault.type="pk",vault.data=Object(_cfxjs_utils__WEBPACK_IMPORTED_MODULE_5__.b)(privateKey);else if(mnemonic)vault.type="hd";else if(address){var validateResult=function(address){return Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_3__.d)(address)?{cfxOnly:!0,address:"0x"+Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_3__.a)(address).hexAddress.toString("hex")}:{address:address,cfxOnly:!1}}(address);vault.type="pub",vault.data=validateResult.address,vault.cfxOnly=validateResult.cfxOnly}var vaults=getVault();if((await Promise.all(vaults.map(Object(_cfxjs_compose__WEBPACK_IMPORTED_MODULE_2__.a)((function(v){return v.data}),Object(_cfxjs_compose__WEBPACK_IMPORTED_MODULE_2__.b)(browser_passworder__WEBPACK_IMPORTED_MODULE_1__.decrypt,password),(function(p){return p.then((function(data){return data===vault.data}))}))))).includes(!0))throw Err.InvalidParams("Duplicate credential");vault.ddata=vault.data,vault.data=await Object(browser_passworder__WEBPACK_IMPORTED_MODULE_1__.encrypt)(password,vault.data);var vaultId=createVault(vault);return newAccountGroup(Object.assign({},arg,{vaultId:vaultId}))}},263:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),browser_passworder__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1315),_cfxjs_hdkey__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1321),_cfxjs_account__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1307),_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1311),NAME="wallet_createAccount",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,{closed:!0},["accountGroupId",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.g],["nickname",{optional:!0},[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.t,{min:1,max:64,doc:"Nickname of this account, a string with 1 to 64 characters"}]]]},permissions={db:["getNetwork","getPassword","getById","getOneAccount","t","getAccount"]},main=async function(_ref){var _vault$ddata,_ref$db=_ref.db,getById=_ref$db.getById,getPassword=_ref$db.getPassword,getNetwork=_ref$db.getNetwork,getOneAccount=_ref$db.getOneAccount,t=_ref$db.t,getAccount=_ref$db.getAccount,_ref$params=_ref.params,accountGroupId=_ref$params.accountGroupId,nickname=_ref$params.nickname,Err=_ref.Err,group=getById(accountGroupId);if(!group)throw Err.InvalidParams("Invalid account group id");var vault=group.vault;if("hd"!==vault.type)throw Err.InvalidParams("Can't add account into none hd vault");var existAccounts=getAccount({accountGroup:accountGroupId}),nextAccountIdx=existAccounts.length;if(existAccounts.reduce((function(acc,account){return acc||account.nickname===nickname}),!1))throw Err.InvalidParams(`Invalid nickname "${nickname}", duplicate with other account in the same account group`);var password=getPassword(),decrypted=null!==(_vault$ddata=vault.ddata)&&void 0!==_vault$ddata?_vault$ddata:await Object(browser_passworder__WEBPACK_IMPORTED_MODULE_1__.decrypt)(password,vault.data),networks=getNetwork();return(await Promise.all(networks.map((async function(_ref2){var _getOneAccount,_tempids$accountId,eid=_ref2.eid,hdPath=_ref2.hdPath,netId=_ref2.netId,type=_ref2.type,_await$getNthAccountO=await Object(_cfxjs_hdkey__WEBPACK_IMPORTED_MODULE_2__.a)({mnemonic:decrypted,hdPath:hdPath.value,nth:nextAccountIdx,only0x1Prefixed:vault.cfxOnly}),address=_await$getNthAccountO.address,index=_await$getNthAccountO.index,privateKey=_await$getNthAccountO.privateKey,accountId=(null===(_getOneAccount=getOneAccount({index:nextAccountIdx,accountGroup:accountGroupId}))||void 0===_getOneAccount?void 0:_getOneAccount.eid)||"accountId";return accountId=null!==(_tempids$accountId=t([{eid:-1,address:{vault:vault.eid,network:eid,index:index,hex:address,pk:privateKey}},"cfx"===type&&{eid:-1,address:{cfxHex:Object(_cfxjs_account__WEBPACK_IMPORTED_MODULE_3__.f)(address),base32:Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_4__.b)(Object(_cfxjs_account__WEBPACK_IMPORTED_MODULE_3__.f)(address),netId,!0)}},{eid:accountId,account:{index:nextAccountIdx,nickname:null!=nickname?nickname:"Account "+(nextAccountIdx+1),address:-1,accountGroup:accountGroupId,hidden:!1}}]).tempids.accountId)&&void 0!==_tempids$accountId?_tempids$accountId:accountId}))))[0]}},264:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1311),_cfxjs_account__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1307),base=[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,{closed:!0}],hex=["hex",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.u],base32=["base32",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.u],addrType=["type",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.a],cfx=["cfx",{optional:!0},_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.u],ethAddressSchema=[].concat(base,[hex,["eth",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.u]]),cfxHexAddressSchema=[].concat(base,[hex,cfx,addrType]),cfxBase32AddressSchema=[].concat(base,[base32,cfx,addrType,["networkId",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.n]]),schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.p,ethAddressSchema,cfxHexAddressSchema,cfxBase32AddressSchema]},permissions={locked:!0},main=function(_ref){var _ref$params=_ref.params,eth=_ref$params.eth,base32=_ref$params.base32,hex=_ref$params.hex,networkId=_ref$params.networkId,type=_ref$params.type;return eth?Object(_cfxjs_account__WEBPACK_IMPORTED_MODULE_2__.d)():hex?function(type){return type?Object(_cfxjs_account__WEBPACK_IMPORTED_MODULE_2__.d)(type):Object(_cfxjs_account__WEBPACK_IMPORTED_MODULE_2__.c)()}(type):base32?Object(_cfxjs_base32_address__WEBPACK_IMPORTED_MODULE_1__.c)(type,networkId):void 0}},265:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var bip39__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1320),_cfxjs_spec__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1302),NAME="wallet_generateMnemonic",schemas={output:_cfxjs_spec__WEBPACK_IMPORTED_MODULE_1__.m},permissions={locked:!0},main=function(){return Object(bip39__WEBPACK_IMPORTED_MODULE_0__.generateMnemonic)()}},266:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_account__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1307),_cfxjs_spec__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1302),NAME="wallet_generatePrivateKey",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_1__.p,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_1__.o,[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_1__.l,["entropy",{optional:!0},_cfxjs_spec__WEBPACK_IMPORTED_MODULE_1__.s]]],output:_cfxjs_spec__WEBPACK_IMPORTED_MODULE_1__.r},permissions={locked:!0};async function main(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},params=_ref.params;return Object(_cfxjs_account__WEBPACK_IMPORTED_MODULE_0__.e)(null==params?void 0:params.entropy)}},267:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),_cfxjs_addr_by_network__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1350);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var NAME="wallet_getBalance",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.p,[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.f,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.j],[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.f,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.d]]},permissions={locked:!0,methods:["cfx_getBalance","eth_getBalance"]},main=async function(_ref){var _ref$rpcs=_ref.rpcs,cfx_getBalance=_ref$rpcs.cfx_getBalance,eth_getBalance=_ref$rpcs.eth_getBalance,address=_slicedToArray(_ref.params,1)[0],_ref$network=_ref.network,type=_ref$network.type,netId=_ref$network.netId;address=Object(_cfxjs_addr_by_network__WEBPACK_IMPORTED_MODULE_1__.a)({address:address,networkType:type,networkId:netId,addressType:"user"});var getBalance="cfx"===type?cfx_getBalance:eth_getBalance;return await getBalance([address])}},268:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),_cfxjs_addr_by_network__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1350);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var NAME="wallet_getNextNonce",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.p,[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.f,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.d],[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.f,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.j]]},permissions={locked:!0,methods:["cfx_getNextNonce","eth_getTransactionCount"]},main=async function(_ref){var _ref$rpcs=_ref.rpcs,eth_getTransactionCount=_ref$rpcs.eth_getTransactionCount,cfx_getNextNonce=_ref$rpcs.cfx_getNextNonce,address=_slicedToArray(_ref.params,1)[0],_ref$network=_ref.network,netId=_ref$network.netId,type=_ref$network.type;address=Object(_cfxjs_addr_by_network__WEBPACK_IMPORTED_MODULE_1__.a)({address:address,networkType:type,networkId:netId});var getNextNonce="cfx"===type?cfx_getNextNonce:eth_getTransactionCount;return await getNextNonce([address])}},269:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),NAME="wallet_importAddress",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,{closed:!0},["password",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.q],["address",[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.p,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.j,_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.d]]]},permissions={methods:["wallet_addVault"]},main=async function(_ref){var _ref$params=_ref.params,password=_ref$params.password,address=_ref$params.address,wallet_addVault=_ref.rpcs.wallet_addVault;return await wallet_addVault({password:password,address:address.toLowerCase()})}},270:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),NAME="wallet_importMnemonic",permissions={methods:["wallet_addVault"]},schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,{closed:!0},["mnemonic",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.m],["password",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.q]]},main=async function(_ref){var params=_ref.params,wallet_addVault=_ref.rpcs.wallet_addVault;return await wallet_addVault(params)}},271:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),NAME="wallet_importPrivateKey",permissions={methods:["wallet_addVault"]},schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,{closed:!0},["privateKey",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.r],["password",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.q]]},main=async function(_ref){var params=_ref.params,wallet_addVault=_ref.rpcs.wallet_addVault;return await wallet_addVault(params)}},272:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var NAME="wallet_isLocked",permissions={db:["getLocked"],locked:!0},main=function(_ref){return(0,_ref.db.getLocked)()}},273:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var NAME="wallet_lock",permissions={db:["setLocked"]},main=async function(_ref){(0,_ref.db.setLocked)(!0)}},274:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),NAME="wallet_unlock",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,["password",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.q]]},permissions={locked:!0,methods:["wallet_validatePassword"],db:["setPassword"]},main=async function(_ref){var password=_ref.params.password,setPassword=_ref.db.setPassword,wallet_validatePassword=_ref.rpcs.wallet_validatePassword,Err=_ref.Err;if(!await wallet_validatePassword({password:password}))throw Err.InvalidParams("Invalid password");setPassword(password)}},275:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),_cfxjs_checks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1327),NAME="wallet_updateAccount",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,{closed:!0},["accountId",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.g],["nickname",{optional:!0},[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.t,{min:1,max:64,doc:"Nickname of this account, a string with 1 to 64 characters"}]],["hidden",{optional:!0},_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.e]]},permissions={db:["t","getById","getAccount"]},main=async function(_ref){var InvalidParams=_ref.Err.InvalidParams,_ref$db=_ref.db,getById=_ref$db.getById,t=_ref$db.t,getAccount=_ref$db.getAccount,_ref$params=_ref.params,nickname=_ref$params.nickname,hidden=_ref$params.hidden,accountId=_ref$params.accountId,account=getById(accountId);if(!account)throw InvalidParams("Invalid accountId "+accountId);if(nickname&&getAccount({accountGroup:account.accountGroup.eid,nickname:nickname}).length)throw InvalidParams(`Invalid nickname ${nickname}, duplicate with other account in the same account group`);t([nickname&&{eid:accountId,account:{nickname:nickname}},Object(_cfxjs_checks__WEBPACK_IMPORTED_MODULE_1__.a)(hidden)&&{eid:accountId,account:{hidden:hidden}}])}},276:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),_cfxjs_checks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1327),NAME="wallet_updateAccountGroup",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,{closed:!0},["accountGroupId",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.g],["nickname",{optional:!0},[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.t,{min:1,max:64,doc:"Nickname of this accountGroup, a string with 1 to 64 characters"}]],["hidden",{optional:!0},_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.e]]},permissions={db:["t","getById","getAccountGroupByNickname"]},main=async function(_ref){var InvalidParams=_ref.Err.InvalidParams,_ref$db=_ref.db,getById=_ref$db.getById,t=_ref$db.t,getAccountGroupByNickname=_ref$db.getAccountGroupByNickname,_ref$params=_ref.params,nickname=_ref$params.nickname,hidden=_ref$params.hidden,accountGroupId=_ref$params.accountGroupId;if(!getById(accountGroupId))throw InvalidParams("Invalid accountGroupId "+accountGroupId);if(nickname&&getAccountGroupByNickname(nickname).length)throw InvalidParams(`Invalid nickname ${nickname}, duplicate with other account group`);t([nickname&&{eid:accountGroupId,account:{nickname:nickname}},Object(_cfxjs_checks__WEBPACK_IMPORTED_MODULE_1__.a)(hidden)&&{eid:accountGroupId,account:{hidden:hidden}}])}},277:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var _cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),browser_passworder__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1315),NAME="wallet_validatePassword",schemas={input:[_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.l,{closed:!0},["password",_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.q]],output:_cfxjs_spec__WEBPACK_IMPORTED_MODULE_0__.e},permissions={internal:!0,locked:!0,db:["getVault"]};async function main(_ref){var getVault=_ref.db.getVault,password=_ref.params.password,vaults=getVault();if(!vaults.length)return!0;var valid=!1;try{await Object(browser_passworder__WEBPACK_IMPORTED_MODULE_1__.decrypt)(password,vaults[0].data),valid=!0}catch(err){valid=!1}return valid}},278:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NAME",(function(){return NAME})),__webpack_require__.d(__webpack_exports__,"schemas",(function(){return schemas})),__webpack_require__.d(__webpack_exports__,"permissions",(function(){return permissions})),__webpack_require__.d(__webpack_exports__,"main",(function(){return main}));var spec=__webpack_require__(1302),hdkey=__webpack_require__(1321),utils=__webpack_require__(1310),bn=__webpack_require__(1536),bn_default=__webpack_require__.n(bn),checks=__webpack_require__(1327);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ZERO=new bn_default.a(0,10),hasTx=async function(_ref){var getTxCount=_ref.getTxCount,address=_ref.address,rst=!1;try{var _res$result,res=await getTxCount([address]);new bn_default.a(Object(utils.b)(null!==(_res$result=null==res?void 0:res.result)&&void 0!==_res$result?_res$result:res),16).gt(ZERO)&&(rst=!0)}catch(err){}return rst},hasBalance=async function(_ref2){var getBalance=_ref2.getBalance,address=_ref2.address,rst=!1;try{var _res$result2,res=await getBalance([address]);new bn_default.a(Object(utils.b)(null!==(_res$result2=null==res?void 0:res.result)&&void 0!==_res$result2?_res$result2:res),16).gt(ZERO)&&(rst=!0)}catch(err){}return rst},compose=__webpack_require__(1348),browser_passworder=__webpack_require__(1315),NAME="wallet_discoverAccounts",limitSchema=["limit",{optional:!0},[spec.k,{min:1,max:100,doc:"how many derivation we try, default to 10"}]],schemas={input:[spec.l,{closed:!0},["accountGroupId",spec.g],["waitTillFinish",{optional:!0},spec.u],limitSchema]},permissions={methods:["wallet_getBalance","wallet_getNextNonce","wallet_createAccount"],db:["t","getById","getNetwork","getPassword","getOneAccount","getAccount"]},main=async function(_ref){var _getAccount$length,_getAccount,_ref$rpcs=_ref.rpcs,wallet_getBalance=_ref$rpcs.wallet_getBalance,wallet_getNextNonce=_ref$rpcs.wallet_getNextNonce,wallet_createAccount=_ref$rpcs.wallet_createAccount,_ref$db=_ref.db,getById=_ref$db.getById,getNetwork=_ref$db.getNetwork,getPassword=_ref$db.getPassword,getAccount=_ref$db.getAccount,_ref$params=_ref.params,accountGroupId=_ref$params.accountGroupId,_ref$params$limit=_ref$params.limit,limit=void 0===_ref$params$limit?10:_ref$params$limit,waitTillFinish=_ref$params.waitTillFinish,InvalidParams=_ref.Err.InvalidParams,accountGroup=getById(accountGroupId);if(!accountGroup)throw InvalidParams("Invalid accountGroupId, account group not found");var oldAccountsCount=null!==(_getAccount$length=null===(_getAccount=getAccount({accountGroup:accountGroupId}))||void 0===_getAccount?void 0:_getAccount.length)&&void 0!==_getAccount$length?_getAccount$length:0,vault=getById(accountGroup.vault.eid);if("hd"===vault.type){var mnemonic=await Object(browser_passworder.decrypt)(getPassword(),vault.data),networks=getNetwork(),promises=Promise.all(networks.map((async function(_ref2){var name=_ref2.name,hdPath=_ref2.hdPath;return await async function(){for(var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},getBalance=_ref3.getBalance,getTxCount=_ref3.getTxCount,mnemonic=_ref3.mnemonic,hdPath=_ref3.hdPath,_ref3$startFrom=_ref3.startFrom,startFrom=void 0===_ref3$startFrom?0:_ref3$startFrom,_ref3$max=_ref3.max,max=void 0===_ref3$max?10:_ref3$max,_ref3$only0x1Prefixed=_ref3.only0x1Prefixed,only0x1Prefixed=void 0!==_ref3$only0x1Prefixed&&_ref3$only0x1Prefixed,_ref3$return=_ref3.return0,return0=void 0!==_ref3$return&&_ref3$return,onFindOne=_ref3.onFindOne,found=[],i=startFrom;i<startFrom+max;i++){var rst=await Object(hdkey.a)({mnemonic:mnemonic,hdPath:hdPath,nth:i,only0x1Prefixed:only0x1Prefixed}),_await$Promise$all=await Promise.all([hasTx({getTxCount:getTxCount,address:rst.address}),hasBalance({getBalance:getBalance,address:rst.address})]),_await$Promise$all2=_slicedToArray(_await$Promise$all,2),txOk=_await$Promise$all2[0],balanceOk=_await$Promise$all2[1];if(!(return0&&0===i||txOk||balanceOk))return found;Object(checks.b)(onFindOne)&&await onFindOne(Object.assign({},rst,{nth:i})),found.push(Object.assign({},rst,{nth:i}))}return found}({getBalance:Object(compose.b)(wallet_getBalance,{networkName:name}),getTxCount:Object(compose.b)(wallet_getNextNonce,{networkName:name}),mnemonic:mnemonic,hdPath:hdPath.value,return0:0===oldAccountsCount,startFrom:oldAccountsCount,max:limit})}))).then((async function(found){for(var accountNumToCreate=found.reduce((function(acc,net){return Math.max(acc,net.length)}),0),accountIds=[],i=0;i<accountNumToCreate;i++)accountIds.push(await wallet_createAccount({accountGroupId:accountGroupId}));return accountIds}));return waitTillFinish?await promises:void 0}}}}]);